<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Language" content="ru"></head><body><h1 class="V8SH_pagetitle">Глобальный контекст.УдалитьОбъекты (Global context.DeleteObjects)</h1><p class="V8SH_title">Глобальный контекст (Global context)</p><p class="V8SH_heading">УдалитьОбъекты (DeleteObjects)</p><div class="__SINCE_SHOW_STYLE__"><p class="not_used">Доступен, начиная с версии 8.0.</p></div><p class="V8SH_chapter">Синтаксис:</p>УдалитьОбъекты(&lt;СписокСсылок&gt;, &lt;Проверять&gt;, &lt;НайденныеДанные&gt;, &lt;ОбластьПоиска&gt;, &lt;ВключитьОбъекты&gt;, &lt;ИсключитьОбъекты&gt;)<p class="V8SH_chapter">Параметры:</p><div class="V8SH_rubric"> <p style="margin-top: 2px; margin-bottom: 1px">&lt;СписокСсылок&gt; (обязательный)</div>Тип: <a href="v8help://SyntaxHelperContext/objects/catalog234/Array.html">Массив</a>. <br>Список ссылок на объекты, которые нужно удалить.<div class="V8SH_rubric"> <p style="margin-top: 2px; margin-bottom: 1px">&lt;Проверять&gt; (необязательный)</div>Тип: <a href="v8help://SyntaxHelperLanguage/def_Boolean">Булево</a>. <br>Определяет, выполнять ли контроль ссылочной целостности при выполнении процедуры. <a href="v8help://SyntaxHelperLanguage/def_BooleanTrue">Истина</a> - перед удалением проверяется, нет ли ссылок на удаляемый объект. Если есть, то объект не удаляется, а ссылки помещаются в таблицу значений &lt;НайденныеДанные&gt;. <a href="v8help://SyntaxHelperLanguage/def_BooleanFalse">Ложь</a> - проверка не выполняется.<br>Значение по умолчанию: <a href="v8help://SyntaxHelperLanguage/def_BooleanFalse">Ложь</a>.<div class="V8SH_rubric"> <p style="margin-top: 2px; margin-bottom: 1px">&lt;НайденныеДанные&gt; (необязательный)</div>Тип: <a href="v8help://SyntaxHelperContext/objects/catalog234/catalog236/ValueTable.html">ТаблицаЗначений</a>. <br>Содержит ссылки на найденные объекты в виде <a href="v8help://SyntaxHelperContext/objects/catalog234/catalog236/ValueTable.html">ТаблицаЗначений</a>, состоящей из колонок с индексами: 0 - искомая ссылка; 1 - ссылка на объект, если найденная ссылка соответствует объектной таблице или значение, идентифицирующее запись необъектной таблицы; 2 - объект метаданных, которому соответствуют данные, в которых найдена ссылка.<br>В таблицу выводятся только непосредственно препятствующие удалению объекты (без рекурсии).<div class="V8SH_rubric"> <p style="margin-top: 2px; margin-bottom: 1px">&lt;ОбластьПоиска&gt; (необязательный)</div>Тип: <a href="v8help://SyntaxHelperContext/objects/catalog234/Array.html">Массив</a>. <br>Определяет область поиска объектов, которые следует удалить. Область устанавливается комбинацией разделителей, в состав которых включены объекты метаданных, среди данных которых следует выполнять поиск.<br>Элемент массива имеет тип Массив.<br>Элемент вложенного массива имеет тип:<ul><li>Объект метаданных – Общий реквизит, разделяющий данные.</li><li>Строка – имя общего реквизита, разделяющего данные. </li></ul>По умолчанию имеет значение <a href="v8help://SyntaxHelperLanguage/def_Undefined">Неопределено</a>.<br>Допустимые значения:<ul><li><a href="v8help://SyntaxHelperLanguage/def_Undefined">Неопределено</a>,</li><li>Массив с комбинациями разделителей, определяющий область поиска,</li><li>Пустой массив - область поиска определяется параметрами метода &lt;ВключитьОбъекты&gt; и &lt;ИсключитьОбъекты&gt;.</li></ul>Примечание. Если комбинация разделителей содержит повторы, то вызывается исключение, т.к. в конфигурации не может быть объектов метаданных, дважды включенных в состав одного разделителя.<br>Значение по умолчанию: Неопределено.<div class="V8SH_rubric"> <p style="margin-top: 2px; margin-bottom: 1px">&lt;ВключитьОбъекты&gt; (необязательный)</div>Тип: <a href="v8help://SyntaxHelperContext/objects/catalog234/Array.html">Массив</a>. <br>Позволяет явно указать объекты метаданных, которые должны присутствовать в области поиска ссылок на объекты.<br>Элементом массива могут быть:<ul><li>Объект метаданных.</li><li>Строка – полное имя объекта метаданных.</li></ul>Допустимые значения:<ul><li><a href="v8help://SyntaxHelperLanguage/def_Undefined">Неопределено</a>,</li><li>Пустой массив,</li><li>Массив объектов метаданных.</li></ul><br>Значение по умолчанию: Неопределено.<div class="V8SH_rubric"> <p style="margin-top: 2px; margin-bottom: 1px">&lt;ИсключитьОбъекты&gt; (необязательный)</div>Тип: <a href="v8help://SyntaxHelperContext/objects/catalog234/Array.html">Массив</a>. <br>В качестве элементов массива могут выступать:<ul><li>Объект метаданных,</li><li>Строка – полное имя объекта метаданных.</li></ul>Свойство позволяет явно указать объекты метаданных, которые следует исключить из области поиска ссылок на объекты.<br>Допустимые значения:<ul><li><a href="v8help://SyntaxHelperLanguage/def_Undefined">Неопределено</a></li><li>Пустой массив (нет объектов, которые необходимо дополнительно включить в область поиска).</li><li>Массив объектов метаданных.</li></ul><br>Значение по умолчанию: Неопределено.<p class="V8SH_chapter">Описание:</p><p>Удаляет объекты, ссылки на которые переданы в параметре &lt;СписокСсылок&gt;.<br>При проверке ссылочной целостности поиск осуществляется среди всех данных, из которых могут быть ссылки на переданные объекты. Если на какой-либо объект нет доступа, то вызывается исключение.<br>Требует монопольного режима доступа к базе данных.</p><p class="V8SH_chapter">Доступность: </p><p>Сервер, толстый клиент, внешнее соединение, мобильное приложение (сервер), мобильный автономный сервер.<br>Вызов метода выполняет обращение к серверу.<br></p><p class="V8SH_chapter">Примечание:</p>Ответственность за удаление объектов, на которые, возможно, имеются ссылки в недоступных данному сеансу данных, возлагается на вызывающего метод.<br><br>Если выполняется контроль ссылочной целостности, поиск ссылок выполняется в области данных, определенной параметрами &lt;ОбластьПоиска&gt;, &lt;ВключитьОбъекты&gt; и &lt;ИсключитьОбъекты&gt;.<br>Ссылки на найденные объекты возвращаются в таблице значений со следующими колонками:<ul><li>Поле 1 - Исходная ссылка;</li><li>Поле 2 - Ссылка на объект (для объектных данных) или значение (для необъектных данных);</li><li>Поле 3 - Объект метаданных, которому соответствуют данные, в которых найдена ссылка;</li><li>Поле 4 - Комбинации разделителей, идентифицирующих подобласть, в данных которой найдена ссылка на объект.</li></ul>Если необходимо осуществлять поиск ссылок на объекты в подобластях, то необходимо в параметре &lt;ОбластьПоиска&gt; указывать комбинации разделителей с использованием неустановленных в сеансе разделителей. Если в комбинации разделителей будут указаны только реквизиты, разделяющие данные в режиме <a href="v8help://SyntaxHelperContext/objects/catalog2/catalog370/CommonAttributeSeparatedDataUse/properties/IndependentlyAndSimultaneously8999.html">НезависимоИСовместно</a> (помимо любых реквизитов, установленных в сеансе), то поиск будет выполняться в этих объектах, как среди доступных данных и результаты будут записаны в поле 2. Если хотя бы один неустановленный в сеансе реквизит, разделяет данные в режиме <a href="v8help://SyntaxHelperContext/objects/catalog2/catalog370/CommonAttributeSeparatedDataUse/properties/Independently8998.html">Независимо</a>, то будет выполнена проверка наличия ссылок в подобласти и возвращены значения разделителей, идентифицирующих подобласть. Результат будет записан в поле 4.<br><br>Требования к реквизитам, разделяющим данные, но не используемые в сеансе:<ul><li>У текущего пользователя должен быть доступ на чтение реквизита.</li><li>У текущего пользователя должен быть доступ на запись параметров сеанса, отвечающих за использование и за значение реквизита.</li><li>Этот реквизит не является безопасным. - Требование актуально для информационных баз, опубликованных на веб-сервере.</li></ul>В разделенном режиме метод не устанавливает монопольного режима доступа, а использует управляемые блокировки с учетом текущего разделения.<br><br>На мобильной платформе параметры &lt;ОбластьПоиска&gt;, &lt;ВключитьОбъекты&gt;, &lt;ИсключитьОбъекты&gt; игнорируются.<p class="V8SH_chapter">Пример:</p><TABLE width="100%" bgColor="#f7f7f7"><TBODY><TR><TD><font face="Courier New"> <font color="#0000ff"><font color="#008000">//&nbsp;удаление&nbsp;помеченных&nbsp;объектов&nbsp;с&nbsp;контролем&nbsp;ссылочной&nbsp;целостности<BR></font><BR>Помеченные&nbsp;<font color="#ff0000">=</font>&nbsp;НайтиПомеченныеНаУдаление<font color="#ff0000">(</font><font color="#ff0000">)</font><font color="#ff0000">;</font><BR>Найденные&nbsp;<font color="#ff0000">=</font><font color="#000000">&nbsp;0</font><font color="#ff0000">;</font><BR>УдалитьОбъекты<font color="#ff0000">(</font>Помеченные<font color="#ff0000">,</font><font color="#ff0000">&nbsp;Истина</font><font color="#ff0000">,</font>&nbsp;Найденные<font color="#ff0000">)</font><font color="#ff0000">;</font><font color="#ff0000"><BR>Для&nbsp;</font><font color="#ff0000">каждого&nbsp;</font>Ссылка&nbsp;<font color="#ff0000">из&nbsp;</font>Найденные&nbsp;<font color="#ff0000">Цикл<BR></font>&nbsp;&nbsp;&nbsp;&nbsp;СтрСообщения&nbsp;<font color="#ff0000">=</font>&nbsp;<font color="#000000">"Объект&nbsp;не&nbsp;удален:&nbsp;"</font>&nbsp;<font color="#ff0000">+</font>&nbsp;СокрЛП<font color="#ff0000">(</font>Ссылка<font color="#ff0000">[</font><font color="#000000">0</font><font color="#ff0000">]</font><font color="#ff0000">)</font><font color="#ff0000">;</font><BR>&nbsp;&nbsp;&nbsp;&nbsp;СтрСсылка&nbsp;<font color="#ff0000">=</font>&nbsp;<font color="#000000">",&nbsp;используется&nbsp;в&nbsp;"</font>&nbsp;<font color="#ff0000">+</font>&nbsp;СокрЛП<font color="#ff0000">(</font>Ссылка<font color="#ff0000">[</font><font color="#000000">1</font><font color="#ff0000">]</font><font color="#ff0000">)</font><font color="#ff0000">;</font><BR>&nbsp;&nbsp;&nbsp;&nbsp;Сообщить&nbsp;<font color="#ff0000">(</font>СтрСообщения&nbsp;<font color="#ff0000">+</font>&nbsp;СтрСсылка<font color="#ff0000">)</font><font color="#ff0000">;</font><font color="#ff0000"><BR>КонецЦикла</font><font color="#ff0000">;</font></font><BR></font></font></TD></TR></TBODY></TABLE><p class="V8SH_chapter">Использование в версии:</p><p class="V8SH_versionInfo">Доступен, начиная с версии 8.0.</p><HR><p>&nbsp;&nbsp;&nbsp;&nbsp; <a href=http://www.1centerprise.com/devlinks?C="id=00058O00053M00573;lan=ru" target="_blank">Методическая информация</a></p></body></html>