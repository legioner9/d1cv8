
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>1С-Предприятие. Документация | Конфигурирование и администрирование. Глава 
16</title>

<link rel="stylesheet" type="text/css" href="../../1c.css">
</head>
<body lang=RU link=#0000FF vlink=#800080 background="../../images/background_main.gif">
<h1 class="highlink"><a name="_Toc496454206"><font size="4">Глава 16.<br>
  Журналы расчетов</font></a></h1>
<hr>
<ul>
  <li><a href="#_toc496454207">Журналы расчетов в системе 1С:Предприятие</a></li>
  <li><a href="#_toc496454208">Управление списком журналов расчета</a></li>
  <li><a href="#_toc496454209">Свойства журнала расчетов</a></li>
  <li><a href="#_toc496454210">Создание формы журнала расчетов</a></li>
  <li><a href="#_toc496454211">Конструктор журнала расчетов</a></li>
</ul>
<h2><a name="_Toc469054285"></a><a name="_Toc496454207">Журналы расчетов в системе 
  1С:Предприятие</a></h2>
<p>Журнал расчетов — это средство для просмотра и редактирования результатов расчета. 
  Каждая строка журнала отражает единичное событие расчета для того или иного 
  объекта. Такие события называются актами расчетов и характеризуются следующими 
  данными:</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  объектом, для которого произведен расчет;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  видом (т. е. способом) расчета;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  документом, который ввел данный акт расчета в систему («породил» 
  расчет);</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  результатом расчета;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  протяженностью во времени (т. е. акт расчета имеет дату начала 
  и дату окончания).</p>
<p>Самое важное свойство журнала расчетов — ссылка на справочник, элементы 
  которого являются объектами расчета. Справочник объектов расчета может быть 
  как простым, так и иерархическим. Не обязательно все элементы этого справочника 
  должны рассчитываться конкретным журналом расчетов, но, в свою очередь, все 
  строки журнала расчетов должны соответствовать тому или иному элементу справочника 
  объектов расчета. Как правило, журнал расчетов содержит несколько записей по 
  одному объекту расчета, но одна запись Журнала расчетов не может соответствовать 
  сразу нескольким объектам.</p>
<p>Приведем примеры журналов расчета.</p>
<p>Это может быть журнал расчета заработной платы сотрудников предприятия (каждый 
  сотрудник — объект расчета), при этом выполняется расчет тех или иных начислений 
  и удержаний (виды расчета), имеющих определенную продолжительность и результат. 
  Другой пример — журнал расчета амортизации основных средств, где справочником 
  объектов расчета является справочник основных средств предприятия, а видами 
  расчета — различные алгоритмы расчета амортизации. Третий пример — журнал расчета 
  дивидендов для акционеров АО, где объекты расчета — список акционеров предприятия, 
  а виды расчета — способы начислений дивидендов на акции разных типов.</p>
<p><b>Расчетный период</b>. Журнал расчетов имеет определенную периодичность, 
  т. е. все расчеты в нем выполняются в пределах определенного временного интервала. 
  Каждая запись журнала расчетов, соответствующая одному акту расчета, также имеет 
  временное протяжение (т. е. имеет дату начала и дату окончания).</p>
<p><b>Внимание</b>! Временной интервал каждой отдельной записи журнала 
  не может лежать в разных расчетных периодах журнала.</p>
<p>Записи, лежащие в текущем расчетном периоде, могут, тем не менее, иметь период 
  действия, не лежащий в текущем расчетном периоде. Это значит, что даты начала 
  и окончания конкретной записи могут «выпадать» из текущего периода расчета и 
  относиться к одному из прошлых или будущих периодов. Самым очевидным примером 
  здесь может служить перерасчет зарплаты сотрудника за прошлый период или начисления 
  будущего периода.</p>
<h2><a name="_Toc469054286"></a><a name="_Toc496454208">Управление списком журналов 
  расчета</a></h2>
<p>Вся работа с объектами метаданных типа «Журнал расчетов» ведется в окне «Конфигурация 
  — Метаданные». Для журналов расчетов отведена ветвь дерева метаданных, которая 
  начинается у фразы «Журналы расчетов». Приемы создания, редактирования свойств 
  и удаления журналов расчетов совпадают с общими приемами управления объектами 
  метаданных, изложенными в главе «Метаданные», стр. 18.</p>
<h2><a name="_Toc469054287"></a><a name="_Toc496454209">Свойства журнала расчетов</a></h2>
<p>В этом параграфе будут изложены уникальные свойства журналов расчетов, в дополнение 
  к общим свойствам объектов метаданных, о которых говорилось в п. «Свойства объектов 
  метаданных» на стр. 21.</p>
<p>Свойства журналов расчета редактируются в окне редактирования «Журнал расчетов».</p>
<p><b>Справочник</b>. Как уже упоминалось, журнал расчетов создается не «сам по 
  себе», а для конкретного справочника. Это значит, что журнал расчета содержит 
  результаты не «просто» расчетов, а расчетов, проведенных для конкретных объектов. 
  В системе 1С:Предприятие такими объектами являются элементы конкретного справочника.</p>
<p>Для выбора справочника объектов расчета в поле «Справочник» следует выбрать 
  один из предлагаемых справочников.</p>
<p>Справочник объектов расчета — важный параметр с точки зрения целостности данных. 
  Система не позволяет изменить эту характеристику журнала расчетов в том случае, 
  если журнал расчетов уже содержит записи. Это значит, что нельзя подменить список 
  объектов расчета для заполненного журнала расчета. На практике это приведет 
  к тому, что, например, нельзя данные расчета амортизации основных средств превратить 
  в данные расчета дивидендов акционеров.</p>
<p><b>Периодичность</b>. Теперь подробно поясним группу параметров «Периодичность».</p>
<p>Журнал расчетов, как объект метаданных, предназначен для проведения периодических, 
  т.е. повторяющихся через равные промежутки времени расчетов. Это значит, что 
  все акты расчетов (строки журнала расчетов) расположены во времени в том или 
  ином временном интервале, называемом расчетным периодом. Величина расчетного 
  периода может принимать следующие значения:</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  день;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  неделя;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  месяц;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  квартал;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  год.</p>
<p>Система не позволяет изменить периодичность журнала расчетов в том случае, 
  если журнал расчетов уже содержит записи. Это значит, что нельзя изменить величину 
  временного интервала между расчетами в одном журнале расчетов. Тем не менее, 
  можно создать новый журнал расчета для того же справочника объектов расчета, 
  но с другой периодичностью. На практике это значит, что, например, при переходе 
  от помесячного расчета заработной платы к еженедельному расчету, необходимо, 
  не удаляя старого журнала расчетов (для сохранения прежних данных), создать 
  новый журнал расчетов с периодичностью «неделя».</p>
<p>Вследствие важности характеристик «Периодичность» и «Справочник», система выдает 
  предупреждение о попытке смены периодичности журнала расчетов или справочника 
  объектов расчета в окне редактирования свойств журнала расчетов.</p>
<p><b>Дата отсчета </b>— важная характеристика, также определяющая временные характеристики 
  журнала расчетов.</p>
<p>Для конкретных 
  прикладных задач, реализуемых в программе 1С:Предприятие, бывает важно указать 
  не только периодичность выполняемых расчетов, но и произвольно сместить эти 
  периоды по времени. Например, для периодичности «педеля» бывает важно указать, 
  какой именно день начинает неделю (понедельник, воскресенье или другой); 
  для периодичности «месяц» бывает необходимо указать число, с которого начинается 
  расчетный месяц, и т.д.</p>
<p>Для всех возможных типов периодичности журнала расчетов — от недели до года 
  (очевидно, что для периода «день» задавать дату отсчета не имеет смысла) — начало 
  отсчета задается конкретной датой. От указанной даты будут отмеряться заданные 
  периоды: если период «месяц» и дата — 25-ое число какого-то бы ни было месяца 
  и года, то для журнала расчетов каждый месячный отрезок времени (период расчета) 
  будет начинаться с 25-го числа. Это является причиной того, что при периодичности 
  «месяц» не следует задавать дату отсчета большую, чем 28 число.</p>
<p><b>Результат</b>. Группа параметров «Результат» позволяет задать формат числа, 
  которое является результатом отдельного акта расчета. Фактически, это определение 
  формата предопределенного реквизита журнала расчетов «Результат». Тип этого 
  реквизита всегда число, можно влиять лишь на его размер и точность.</p>
<p><b>Реквизиты</b>. Далее необходимо пояснить, что имеется в виду под словом 
  «реквизиты» в применении к журналам расчетов.</p>
<p>Любой вновь созданный журнал расчетов можно представить как таблицу данных, 
  которая имеет 8 обязательных реквизитов:</p>
<table border=1 cellspacing=0 cellpadding=0>
  <tr> 
    <td width=127 valign=top> 
      <p>«Объект»</p>
    </td>
    <td width=520 valign=top> 
      <p>ссылка на элемент справочника объектов расчета;</p>
    </td>
  </tr>
  <tr> 
    <td width=127 valign=top> 
      <p>«Вид расчета»</p>
    </td>
    <td width=520 valign=top> 
      <p>ссылка на вид расчета, используемый в конкретной записи журнала расчетов;</p>
    </td>
  </tr>
  <tr> 
    <td width=127 valign=top> 
      <p>«Документ»</p>
    </td>
    <td width=520 valign=top> 
      <p>ссылка на документ, на основании которого введена конкретная запись журнала 
        расчетов;</p>
    </td>
  </tr>
  <tr> 
    <td width=127 valign=top> 
      <p>«Родительский документ»</p>
    </td>
    <td width=520 valign=top> 
      <p>ссылка на документ, который ввел конкретную запись журнала расчетов;</p>
    </td>
  </tr>
  <tr> 
    <td width=127 valign=top> 
      <p>«Дата начала» и «Дата окончания»</p>
    </td>
    <td width=520 valign=top> 
      <p>реквизиты определяющие время действия (протяженность во времени) конкретного 
        расчета;</p>
    </td>
  </tr>
  <tr> 
    <td width=127 valign=top> 
      <p>«Первичная запись»</p>
    </td>
    <td width=520 valign=top> 
      <p>ссылка на запись журнала расчетов, перерасчетом которой является текущая 
        запись</p>
    </td>
  </tr>
  <tr> 
    <td width=127 valign=top> 
      <p>«Результат»</p>
    </td>
    <td width=520 valign=top> 
      <p>результат расчета.</p>
    </td>
  </tr>
</table>
<p>Кроме того, система 1С:Предприятие позволяет создать для журнала расчетов 
  набор <i>дополнительных реквизитов</i>, в которых будет храниться различная 
  дополнительная информация о проведенном акте расчета.</p>
<p>При показе журнала на экране эти свойства могут быть представлены в виде дополнительных 
  колонок в форме журнала. Кроме того, сведения, хранящиеся в этих дополнительных 
  колонках, можно будет использовать при расчетах, в отчетах и так далее.</p>
<p>Для управления списком реквизитов журнала расчетов и редактирования их свойств 
  служат управляющие элементы группы «Реквизиты» окна редактирования «Журнал расчетов». 
  Назначение и порядок использования управляющих элементов группы «Реквизиты» 
  можно посмотреть в п. «Редактирование списков объектов метаданных» на стр. 21.</p>
<p><b>Графы отбора</b>. Группа управляющих элементов «Графы отбора» позволяет 
  задать набор граф отбора журнала расчетов и правила их заполнения. С помощью 
  граф отбора специалист, осуществляющий конфигурирование системы, создает предопределенные 
  критерии отбора. При использовании кон4)игурации по этим критериям будет выполняться 
  отбор строк в журнале. Графами отбора в журнале расчетов могут служить реквизиты 
  справочника объектов расчета, назначенного данному журналу. Кроме того, в качестве 
  граф отбора могут использоваться значения «Родитель» и «Владелец» этого справочника. 
  Использование этих значений в качестве граф отбора журнала расчетов имеет смысл 
  только в том случае, когда справочник объектов расчета соответственно иерархический 
  или подчиненный (или и то, и другое).</p>
<p>Использование тех или иных реквизитов справочника в качестве граф отбора указывается 
  галочкой у наименования реквизита.</p>
<p>Переключатель «Записывать на начало/конец расчетного периода» задает правила 
  заполнения граф отбора для реквизитов справочника, которые являются периодическими.</p>
<p>Если переключатель установлен в положение «на конец периода» (что делается 
  по умолчанию), это значит, что отбор но периодическому реквизиту будет проводиться 
  по его значению на конец расчетного периода журнала расчетов. Следовательно, 
  если в журнале задействован отбор по реквизиту «Подразделение», и значение этого 
  реквизита сменилось на протяжении расчетного периода конкретной записи журнала, 
  то при отборе запись журнала расчетов будет использовать более позднее значение 
  реквизита «Подразделение».</p>
<h2><a name="_Toc469054288"></a><a name="_Toc496454210">Создание формы журнала 
  расчетов</a></h2>
<p>Когда в Конфигураторе создается новый журнал документов, для пего автоматически 
  создается форма для показа журнала на экране. Эта форма имеет идентификатор 
  Форма Списка. В качестве единственного элемента она будет содержать табличную 
  часть для отображения списка документов.</p>
<p>Когда в Конфигураторе создается новый журнал расчетов, для него автоматически 
  создается форма для показа журнала на экране. Эта форма имеет идентификатор 
  ФормаСписка. В качестве единственного элемента она будет содержать табличную 
  часть для отображения записей журнала расчетов.</p>
<p>При первом обращении к новой форме журнала на экран может быть вызван диалог 
  автоматической вставки колонок табличной части, соответствующих графам журнала.</p>
<p>В общем случае, диалог содержит 5 реквизитов, соответствующих обязательным 
  реквизитам журнала расчетов: «Объект» — ссылка на элемент справочника объектов 
  расчета; «ВидРасч» — ссылка на вид расчета, по которому рассчитывается конкретная 
  запись; «ДатаНачала» — дата начала расчета; «ДатаОкончания» — дата окончания 
  расчета; «Результат» — результат расчета записи. Если у журнала расчетов существуют 
  дополнительные реквизиты, то в список граф будут добавлены эти реквизиты.</p>
<p>Если в диалоге автоматической вставки реквизитов снят флажок «Вызывать для 
  новых форм», при обращении к новой форме журнала расчетов в табличную часть 
  будут автоматически вставлены перечисленные выше реквизиты.</p>
<p>Созданная Конфигуратором форма журнала расчетов может быть отредактирована. 
  Для редактирования используется редактор форм, который можно вызвать одним из 
  следующих способов:</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  в диалоге для редактирования журнала расчетов нажмите кнопку «<b>Форма</b>»;</p>
<p>или</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  в окне «Конфигурация — Метаданные» выделите наименование журнала 
  расчетов;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  нажатием правой кнопки мыши вызовите на экран контекстное меню;</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  в этом меню выберите пункт «Редактировать форму».</p>
<p>Подробно работа с редактором форм изложена в главе «Редактор форм».</p>
<h2><a name="_Toc469054289"></a><a name="_Toc496454211">Конструктор журнала расчетов</a></h2>
<p>Вызов Конструктора для создания объектов метаданных описан в главе «Метаданные», 
  как и задание в первом окне Конструктора идентификатора, синонима и комментария 
  создаваемого объекта метаданных (стр. 19).</p>
<p>В следующем диалоге Конструктора предлагается определить справочник, для которого 
  создается журнал расчетов. Это может быть один из имеющихся справочников или 
  новый справочник, в зависимости от положения переключателя.</p>
<p>Если выбрано создание нового справочника, для него необходимо указать идентификатор. 
  Новый справочник появляется на соответствующей ветви дерева метаданных.</p>
<p>В следующем диалоге Конструктора задается периодичность проведения расчетов 
  путем определения длины периода («Размер») и даты отсчета.</p>
<p>После задания периодичности создаваемому журналу расчетов предлагается поместить 
  команду вызова для него в меню «Журналы расчетов» одного из пользовательских 
  интерфейсов, существующих в конфигурации.</p>
<p>Нажатие на кнопку «<b>Готово</b>» завершает работу Конструктора. Открывается 
  окно редактирования свойств созданного журнала расчетов.</p>

</body>
</html>
