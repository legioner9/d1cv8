
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>1С-Предприятие. Документация | Конфигурирование и администрирование. Глава 
17</title>

<link rel="stylesheet" type="text/css" href="../../1c.css">
</head>
<body lang=RU link=#0000FF vlink=#800080 background="../../images/background_main.gif">
<ul>
</ul>
<h1 class="highlink"><a name="_Toc496454235"><font size="4">Глава 17.<br>
  Виды и группы расчетов</font></a></h1>
<hr>
<ul>
  <li><a href="#_toc496454236">Виды расчетов в системе 1С:Предприятие</a></li>
  <li><a href="#_toc496454237">Управление списками видов расчетов и групп расчетов</a></li>
  <li><a href="#_toc496454238">Свойства вида расчета</a></li>
  <li><a href="#_toc496454239">Управление входимостью расчетов в группы</a></li>
  <li><a href="#_toc496454240">Модуль расчета</a></li>
  <li><a href="#_toc496454241">Правила перерасчета</a></li>
  <ul>
    <li><a href="#_toc496454242">Управление списком правил перерасчета</a></li>
    <li><a href="#_toc496454243">Свойства правил перерасчета</a></li>
  </ul>
</ul>
<p>Важнейшим свойством системы 1С:Предприятие является возможность определения 
  произвольных алгоритмов расчета. Конкретные алгоритмы расчетов зависят от области 
  применения программы. Для расчета заработной платы, например, это будут начисления 
  и удержания; для задачи учета акций — это алгоритмы расчета дивидендов по акциям 
  разного типа и т.д.</p>
<p>Для алгоритмизации расчетов в системе 1С:Прсднриятие служит понятие <i>видов 
  расчетов</i>.</p>
<h2><a name="_Toc469054291"></a><a name="_Toc496454236">Виды расчетов в системе 
  1С:Предприятие</a></h2>
<p><i>Виды расчетов </i>в системе 1С:Предприятие — это специальный тип объектов 
  метаданных, основное свойство которых — наличие алгоритма обработки данных. 
  Результатом действия этого алгоритма является заполнение реквизита «Результат» 
  журнала расчетов. Понятие видов расчета неразрывно связано с понятием журналов 
  расчетов, так как журнал расчетов — единственное место, где «срабатывают» алгоритмы 
  видов расчетов. Один из предопределенных реквизитов журнала расчетов является 
  реквизитом типа «Вид расчета» и предназначен для хранения ссылки на конкретный 
  вид расчета. С использованием алгоритма именно этого вида расчета будет выполняться 
  вычисление результата расчета при выполнении системной операции «Рассчитать».</p>
<p><b>Группы расчетов</b>. Понятие <i>группы расчетов </i>имеет в системе 1С:Предприятие 
  вспомогательное значение. Единственное предназначение групп расчетов — упорядочивание 
  и классификация видов расчета для тех областей применения программы 1С:Предприятие, 
  где количество различных алгоритмов обработки данных и, следовательно, видов 
  расчетов значительно. Тесная взаимосвязь между этими двумя понятиями объясняет 
  то, что они рассматриваются в одной главе данного Руководства.</p>
<h2><a name="_Toc469054292"></a><a name="_Toc496454237">Управление списками видов 
  расчетов и групп расчетов</a></h2>
<p>Вся работа с объектами метаданных типа «Вид расчета» и «Группа расчетов» ведется 
  в окне «Конфигурация — Метаданные». Для видов расчетов отведена ветвь дерева 
  метаданных, которая начинается у фразы «Виды расчетов», а для групп расчетов 
  — ветвь «Группы расчетов». Приемы создания, редактирования свойств и удаления 
  видов расчетов и групп расчетов совпадают с общими приемами управления объектами 
  метаданных, изложенными в главе «Метаданные», стр. <b>Ошибка! 
  Закладка не определена.</b>.</p>
<h2><a name="_Toc469054293"></a><a name="_Toc496454238">Свойства вида расчета</a></h2>
<p>В этом параграфе будут описаны уникальные свойства видов расчетов, в дополнение 
  к общим свойствам объектов метаданных, о которых говорилось в п. «Свойства объектов 
  метаданных» на стр. <b>Ошибка! Закладка 
  не определена.</b>.</p>
<p>Свойства вида расчета редактируются в окне редактирования «Вид расчета».</p>
<p><b>Приоритет</b>. Особого пояснения требует свойство «Приоритет», которое является 
  одной из важных характеристик вида расчета.</p>
<p>Дело в том, что для многих предметных областей применения программы 1С:Предприятие 
  очень важным бывает очередность, в которой выполняются те или иные расчеты. 
  Например, в случае расчета заработной платы, как минимум, важно сначала рассчитать 
  начисления, а затем удержания.</p>
<p>Для организации последовательности выполнения расчетов служит понятие их приоритета. 
  Этот параметр может принимать значение от 0 до 999 и действует следующим образом: 
  чем меньше приоритет расчета, тем раньше он выполняется. Это отражается в последовательности 
  расположения записей журнала расчетов — записи с видами расчетов меньшего приоритета 
  располагаются перед записями с видами расчетов большего приоритета.</p>
<p><b>Вытесняющие расчеты</b>. Представление о вытесняющих расчетах в системе 
  1С:Предприятие связано со следующими практическими предпосылками.</p>
<p>В некоторых случаях требуется автоматизировать предметные области, в которых 
  расчет каких-либо величин может вестись взаимно исключающими способами. Возвращаясь 
  вновь к задаче расчета заработной платы, рассмотрим пример расчета следующих 
  начислений: оплата рабочих дней по окладу, оплата дней болезни по больничному 
  листу и оплата дней отпуска.</p>
<p>Очевидно, что в этом случае выполняется условие взаимоисключения перечисленных 
  видов расчета — нельзя, например, одновременно и болеть и работать, т. е. получать 
  и оклад, и деньги по больничному листу. Такие расчеты взаимно исключают друг 
  друга во времени и система должна гарантировать, что ввод одного из них приведет 
  к исключению другого.</p>
<p>Заметим, что взаимное исключение видов расчета ограничивается одним объектом 
  расчета — болезнь одного сотрудника не исключает оплату по окладу другого сотрудника.</p>
<p>Для пояснения приведем примеры вытесняющих и не вытесняющих расчетов в рамках 
  все того же расчета заработной платы. Вытесняющими расчетами, как правило, являются: 
  оплата по основному виду деятельности, оплата больничных, оплата отпуска, оплата 
  по среднему заработку вынужденного отсутствия на работе и пр. Не вытесняющими 
  расчетами являются: удержание налога, выплаты штрафов, оплата но исполнительному 
  листу и другие удержания, а также разного рода доплаты.</p>
<p>Механизм управления взаимоисключающими расчетами настраивается в окне «Настройка 
  вытеснения», открывающегося при нажатии соответствующей кнопки в окне «Вид расчета».</p>
<p>В этом окне все виды расчета, включая определяемый, помещены в два списка, 
  «Вытесняет виды расчета» и «Вытесняется видами расчета». Назначение их очевидно 
  из вышесказанного.</p>
<p>Необходимо только отметить, что вполне возможна ситуация, когда некоторому 
  виду расчета флажок устанавливается в обоих списках (взаимовытесняющие виды 
  расчета). Например, форма оплаты труда работника может быть на какой-то период 
  заменена с оплаты по окладу на оплату по тарифу и последний вид расчета должен 
  вытеснить первый; столь же обычно и обратное.</p>
<p>При установке флажка самому определяемому виду расчета в одном из списков флажок 
  в другом списке устанавливается автоматически (самовытесняющий вид расчета). 
  Например, работника на время перевели на другой оклад.</p>
<p>Описанный механизм полностью определяется при редактировании свойств вида расчета, 
  хотя, собственно, этот механизм работает при вводе новых записей журналов расчета. 
  Это еще раз иллюстрирует тесную взаимосвязь понятия <i>журнала расчетов </i>и 
  <i>вида расчета</i>.</p>
<h2><a name="_Toc469054294"></a><a name="_Toc496454239">Управление входимостью 
  расчетов в группы</a></h2>
<p>Механизм группировки видов расчета предназначен для выделения видов расчета 
  по тем или иным признакам, что облегчает дальнейшую работу с ними. Это позволяет, 
  например, определив группу расчетов «Начисления» и, определив входимость в нес 
  конкретных видов расчета, оперировать затем понятием этой группы, а не перебирать 
  все входящие в нее расчеты отдельно.</p>
<p><b>Использование окна редактирования «Вид расчета»</b>. Для редактирования 
  входимости расчета в те или иные группы используются два списка в окне редактирования 
  вида расчета. В левом списке отражены группы, в которые редактируемый вид расчета 
  включен, в правом списке — группы, в которые вид расчета не включен.</p>
<p>Для переноса группы или нескольких групп расчетов из правого списка в левый, 
  т. е. для включения редактируемого вида расчета в требуемую группу или набор 
  групп, выделите требуемые группы в правом окне и нажмите кнопку <img border=0 width=16 height=14
src="img/_c3_eb_e0_e2_e0_2017_image002.gif" v:shapes="_x0000_i1025">.</p>
<p>Для переноса группы или нескольких групп расчетов из левого списка в правый, 
  т. е. для исключения редактируемого вида расчета из некоторой группы или набора 
  групп, выделите требуемые группы в левом окне и нажмите кнопку <img border=0 width=16 height=14
src="img/_c3_eb_e0_e2_e0_2017_image004.gif" v:shapes="_x0000_i1026">.</p>
<p><b>Использование окна редактирования «Группа расчетов»</b>. Объединением видов 
  расчетов в группы, о котором говорилось выше можно управлять не только при редактировании 
  свойств вида расчета, но и при редактировании группы расчетов. Это позволяет, 
  например, создав новую группу расчетов, сразу определить набор видов расчета, 
  входящих в нес, а не указывать входимость расчетов в новую группу путем редактирования 
  каждого расчета.</p>
<p>Для редактирования входимости расчетов в данную группу используются два списка 
  в окне редактирования «Группа расчетов». В левом списке отражены виды расчета, 
  которые включены в данную группу, в правом списке — виды расчета, которые не 
  включены в данную группу.</p>
<p>Для переноса вида расчета или нескольких видов расчетов из правого списка в 
  левый, т. е. для включения их в редактируемую группу, выделите требуемые виды 
  расчетов в правом окне и затем нажмите кнопку <img border=0 width=16 height=14
src="img/_c3_eb_e0_e2_e0_2017_image005.gif" v:shapes="_x0000_i1027">.</p>
<p>Для переноса вида расчета или нескольких видов расчетов из левого списка в 
  правый, т. е. для исключения их из редактируемой группы, выделите требуемые 
  расчеты в левом окне и затем нажмите кнопку <img border=0 width=16 height=14
src="img/_c3_eb_e0_e2_e0_2017_image006.gif" v:shapes="_x0000_i1028">.</p>
<h2><a name="_Toc469054295"></a><a name="_Toc496454240">Модуль расчета</a></h2>
<p>Модуль расчета, как правило, содержит предопределенную процедуру ПровестиРасчет. 
  Основная задача процедуры расчета — описать, каким образом при выполнении операции 
  расчета журнала расчетов должно вычисляться значение «Результат». Кроме того, 
  вид расчета может влиять на другие данные системы, например, изменять содержимое 
  справочников.</p>
<p>Для редактирования модуля расчета используется текстовый редактор, который 
  можно вызвать на экран одним из следующих способов:</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  в окне редактирования вида расчета нажмите кнопку «<b>Модуль расчета</b>»;</p>
<p>или</p>
<p>·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  выберите наименование вида расчета в окне «Конфигурация — Метаданные», 
  нажатием правой кнопки мыши вызовите на экран контекстное меню и в этом меню 
  выберите пункт «Модуль расчета».</p>
<p>Подробно порядок работы с текстовым редактором описан в главе «Редактор 
  текстов».</p>
<h2><a name="_Toc469054296"></a><a name="_Toc496454241">Правила перерасчета</a></h2>
<p>«Правила перерасчета» являются вспомогательными объектами метаданных, предназначенными 
  для автоматического отслеживания актуальности результатов проведенных расчетов 
  при вводе новых записей журнала расчетов, удалении существующих или ручном исправлении 
  результата расчета.</p>
<p>При создании правила перерасчета в Конфигураторе определяются виды расчетов, 
  при редактировании которых правило перерасчета «срабатывает», и виды расчетов, 
  которые должны быть перерассчитаны при срабатывании данного правила.</p>
<p>Список видов расчета, на основании которых срабатывает конкретное правило перерасчета, 
  условно называется <i>ведущие виды расчета</i>. Список видов расчета, которые 
  должны быть перерассчитаны при срабатывании конкретного правила, условно называется 
  <i>зависимые виды расчета</i>.</p>
<p>Например, для организации правильного перерасчета доплат к основным начислениям 
  следует в качестве ведущих видов расчета указать те, на основании которых считаются 
  доплаты (оклад, тариф, сдельная оплата), а в качестве зависимых видов расчета 
  следует указать собственно перерассчитываемые доплаты.</p>
<p>После ввода в систему такого правила перерасчетов журнал расчетов будет вести 
  себя описанным ниже образом. При этом сначала рассмотрим случай для взаимосвязи 
  видов расчета в одном расчетном периоде.</p>
<p>Итак, если в журнале расчетов появится новая (в результате проведения документа), 
  исчезнет (при отмене проведения) или будет исправлена существующая запись с 
  одним из «ведущих» видов расчета (в нашем примере — оклад, тариф, сдельная оплата), 
  то будет снят признак «Рассчитана» со всех записей, соответствующих доплатам, 
  если найдутся таковые, с тем же периодом действия, что и введенная, удаленная 
  или исправленная запись.</p>
<p>Если при этом вводится запись с периодом действия не в текущем расчетном периоде, 
  а в одном из прошлых (например, расчет оклада задним числом за прошлый месяц), 
  то система введет записи-перерасчеты для всех доплат соответствующего прошлого 
  периода.</p>
<p>Правило перерасчета может быть трех типов: перерасчет записей текущего периода, 
  перерасчет записей того же периода, или перерасчет записей будущих периодов.</p>
<p>В первом случае перерассчитываются заданные виды расчетов с только текущего 
  периода в независимости от того, какой период действия имеют изменяемые записи 
  журнала расчетов.</p>
<p>Во втором случае перерассчитываются заданные виды расчетов с тем же периодом 
  действия, что и новая введенная запись.</p>
<p>В третьем — перерассчитываются записи одного или нескольких будущих расчетных 
  периодов.</p>
<p>Например, если построить правило перерасчета больничных листов, то в качестве 
  ведущих расчетов будут назначены виды начи